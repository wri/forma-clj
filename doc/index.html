<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>Forma 0.5.0-SNAPSHOT API documentation</title></head><body><div id="header"><h1><a href="index.html">Forma 0.5.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="forma.classify.logistic.html"><span>forma.classify.logistic</span></a></li><li><a href="forma.date-time.html"><span>forma.date-time</span></a></li><li><a href="forma.gfw.cdm.html"><span>forma.gfw.cdm</span></a></li><li><a href="forma.hadoop.cli.html"><span>forma.hadoop.cli</span></a></li><li><a href="forma.hadoop.io.html"><span>forma.hadoop.io</span></a></li><li><a href="forma.hadoop.jobs.cdm.html"><span>forma.hadoop.jobs.cdm</span></a></li><li><a href="forma.hadoop.jobs.forma.html"><span>forma.hadoop.jobs.forma</span></a></li><li><a href="forma.hadoop.jobs.modis.html"><span>forma.hadoop.jobs.modis</span></a></li><li><a href="forma.hadoop.jobs.neighbors.html"><span>forma.hadoop.jobs.neighbors</span></a></li><li><a href="forma.hadoop.jobs.preprocess.html"><span>forma.hadoop.jobs.preprocess</span></a></li><li><a href="forma.hadoop.jobs.scatter.html"><span>forma.hadoop.jobs.scatter</span></a></li><li><a href="forma.hadoop.jobs.timeseries.html"><span>forma.hadoop.jobs.timeseries</span></a></li><li><a href="forma.hadoop.pail.html"><span>forma.hadoop.pail</span></a></li><li><a href="forma.hadoop.predicate.html"><span>forma.hadoop.predicate</span></a></li><li><a href="forma.hoptree.html"><span>forma.hoptree</span></a></li><li><a href="forma.matrix.utils.html"><span>forma.matrix.utils</span></a></li><li><a href="forma.matrix.walk.html"><span>forma.matrix.walk</span></a></li><li><a href="forma.ops.classify.html"><span>forma.ops.classify</span></a></li><li><a href="forma.playground.html"><span>forma.playground</span></a></li><li><a href="forma.postprocess.output.html"><span>forma.postprocess.output</span></a></li><li><a href="forma.reproject.html"><span>forma.reproject</span></a></li><li><a href="forma.schema.html"><span>forma.schema</span></a></li><li><a href="forma.source.fire.html"><span>forma.source.fire</span></a></li><li><a href="forma.source.gadmiso.html"><span>forma.source.gadmiso</span></a></li><li><a href="forma.source.hdf.html"><span>forma.source.hdf</span></a></li><li><a href="forma.source.rain.html"><span>forma.source.rain</span></a></li><li><a href="forma.source.static.html"><span>forma.source.static</span></a></li><li><a href="forma.source.tilesets.html"><span>forma.source.tilesets</span></a></li><li><a href="forma.static.html"><span>forma.static</span></a></li><li><a href="forma.testing.html"><span>forma.testing</span></a></li><li><a href="forma.thrift.html"><span>forma.thrift</span></a></li><li><a href="forma.trends.analysis.html"><span>forma.trends.analysis</span></a></li><li><a href="forma.trends.filter.html"><span>forma.trends.filter</span></a></li><li><a href="forma.trends.stretch.html"><span>forma.trends.stretch</span></a></li><li><a href="forma.utils.html"><span>forma.utils</span></a></li></ul></div><div class="namespace-index" id="content"><h2>Forma 0.5.0-SNAPSHOT API documentation</h2><div class="doc">[FORMA](http://goo.gl/4YTBw) gone Functional.</div><div class="namespace"><h3><a href="forma.classify.logistic.html"><span>forma.classify.logistic</span></a></h3><pre class="doc"></pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.classify.logistic.html#var-bernoulli-var"><span>bernoulli-var</span></a></li><li><a href="forma.classify.logistic.html#var-beta-increment"><span>beta-increment</span></a></li><li><a href="forma.classify.logistic.html#var-beta-update"><span>beta-update</span></a></li><li><a href="forma.classify.logistic.html#var-info-matrix"><span>info-matrix</span></a></li><li><a href="forma.classify.logistic.html#var-initial-beta"><span>initial-beta</span></a></li><li><a href="forma.classify.logistic.html#var-log-likelihood"><span>log-likelihood</span></a></li><li><a href="forma.classify.logistic.html#var-logistic-beta-vector"><span>logistic-beta-vector</span></a></li><li><a href="forma.classify.logistic.html#var-logistic-fn"><span>logistic-fn</span></a></li><li><a href="forma.classify.logistic.html#var-logistic-prob"><span>logistic-prob</span></a></li><li><a href="forma.classify.logistic.html#var-probability-calc"><span>probability-calc</span></a></li><li><a href="forma.classify.logistic.html#var-ridge-correction"><span>ridge-correction</span></a></li><li><a href="forma.classify.logistic.html#var-score-seq"><span>score-seq</span></a></li><li><a href="forma.classify.logistic.html#var-to-double-matrix"><span>to-double-matrix</span></a></li><li><a href="forma.classify.logistic.html#var-to-double-rowmat"><span>to-double-rowmat</span></a></li><li><a href="forma.classify.logistic.html#var-total-log-likelihood"><span>total-log-likelihood</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.date-time.html"><span>forma.date-time</span></a></h3><pre class="doc"></pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.date-time.html#var-beginning"><span>beginning</span></a></li><li><a href="forma.date-time.html#var-convert"><span>convert</span></a></li><li><a href="forma.date-time.html#var-convert-period-res"><span>convert-period-res</span></a></li><li><a href="forma.date-time.html#var-current-period"><span>current-period</span></a></li><li><a href="forma.date-time.html#var-date-offset"><span>date-offset</span></a></li><li><a href="forma.date-time.html#var-datetime-%3Eperiod"><span>datetime-&gt;period</span></a></li><li><a href="forma.date-time.html#var-delta-periods"><span>delta-periods</span></a></li><li><a href="forma.date-time.html#var-diff-in-days"><span>diff-in-days</span></a></li><li><a href="forma.date-time.html#var-monthly-msec-range"><span>monthly-msec-range</span></a></li><li><a href="forma.date-time.html#var-msecs-from-epoch"><span>msecs-from-epoch</span></a></li><li><a href="forma.date-time.html#var-ordinal"><span>ordinal</span></a></li><li><a href="forma.date-time.html#var-parse"><span>parse</span></a></li><li><a href="forma.date-time.html#var-per-year"><span>per-year</span></a></li><li><a href="forma.date-time.html#var-period-%3Edatetime"><span>period-&gt;datetime</span></a></li><li><a href="forma.date-time.html#var-period-span"><span>period-span</span></a></li><li><a href="forma.date-time.html#var-periodize"><span>periodize</span></a></li><li><a href="forma.date-time.html#var-relative-period"><span>relative-period</span></a></li><li><a href="forma.date-time.html#var-shift-resolution"><span>shift-resolution</span></a></li><li><a href="forma.date-time.html#var-unparse"><span>unparse</span></a></li><li><a href="forma.date-time.html#var-within-dates%3F"><span>within-dates?</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.gfw.cdm.html"><span>forma.gfw.cdm</span></a></h3><pre class="doc">This namespace defines functions for transforming coordinate-based FORMA data
alerts into Google map tile coordinates:

https://developers.google.com/maps/documentation/javascript/maptypes#TileCoordinates

Many of the functions here were ported from the following Python script:

http://www.maptiler.org/google-maps-coordinates-tile-bounds-projection/globalmaptiles.py
</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.gfw.cdm.html#var--%3EAlert"><span>-&gt;Alert</span></a></li><li><a href="forma.gfw.cdm.html#var-GlobalMercator"><span>GlobalMercator</span></a></li><li><a href="forma.gfw.cdm.html#var-map-%3EAlert"><span>map-&gt;Alert</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.hadoop.cli.html"><span>forma.hadoop.cli</span></a></h3><pre class="doc">CLI for managing and manipulating FORMA's operations on the Hadoop
cluster.</pre><div class="index"><p>Public variables and functions:</p><ul></ul></div></div><div class="namespace"><h3><a href="forma.hadoop.io.html"><span>forma.hadoop.io</span></a></h3><pre class="doc"></pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.hadoop.io.html#var-globstring"><span>globstring</span></a></li><li><a href="forma.hadoop.io.html#var-hfs-wholefile"><span>hfs-wholefile</span></a></li><li><a href="forma.hadoop.io.html#var-whole-file"><span>whole-file</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.hadoop.jobs.cdm.html"><span>forma.hadoop.jobs.cdm</span></a></h3><pre class="doc">Functions and Cascalog queries for converting data into map tile
coordinates.</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.hadoop.jobs.cdm.html#var-first-hit"><span>first-hit</span></a></li><li><a href="forma.hadoop.jobs.cdm.html#var-forma-%3Ecdm"><span>forma-&gt;cdm</span></a></li><li><a href="forma.hadoop.jobs.cdm.html#var-hansen-latlon-%3Ecdm"><span>hansen-latlon-&gt;cdm</span></a></li><li><a href="forma.hadoop.jobs.cdm.html#var-hansen-xy-%3Ecdm"><span>hansen-xy-&gt;cdm</span></a></li><li><a href="forma.hadoop.jobs.cdm.html#var-min-period"><span>min-period</span></a></li><li><a href="forma.hadoop.jobs.cdm.html#var-split-line"><span>split-line</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.hadoop.jobs.forma.html"><span>forma.hadoop.jobs.forma</span></a></h3><pre class="doc"></pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.hadoop.jobs.forma.html#var-analyze-trends"><span>analyze-trends</span></a></li><li><a href="forma.hadoop.jobs.forma.html#var-beta-data-prep"><span>beta-data-prep</span></a></li><li><a href="forma.hadoop.jobs.forma.html#var-beta-gen"><span>beta-gen</span></a></li><li><a href="forma.hadoop.jobs.forma.html#var-consolidate-static"><span>consolidate-static</span></a></li><li><a href="forma.hadoop.jobs.forma.html#var-dynamic-clean"><span>dynamic-clean</span></a></li><li><a href="forma.hadoop.jobs.forma.html#var-dynamic-filter"><span>dynamic-filter</span></a></li><li><a href="forma.hadoop.jobs.forma.html#var-fire-tap"><span>fire-tap</span></a></li><li><a href="forma.hadoop.jobs.forma.html#var-forma-estimate"><span>forma-estimate</span></a></li><li><a href="forma.hadoop.jobs.forma.html#var-forma-query"><span>forma-query</span></a></li><li><a href="forma.hadoop.jobs.forma.html#var-forma-tap"><span>forma-tap</span></a></li><li><a href="forma.hadoop.jobs.forma.html#var-mk-timeseries"><span>mk-timeseries</span></a></li><li><a href="forma.hadoop.jobs.forma.html#var-process-neighbors"><span>process-neighbors</span></a></li><li><a href="forma.hadoop.jobs.forma.html#var-tele-clean"><span>tele-clean</span></a></li><li><a href="forma.hadoop.jobs.forma.html#var-unnest-all"><span>unnest-all</span></a></li><li><a href="forma.hadoop.jobs.forma.html#var-unnest-series"><span>unnest-series</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.hadoop.jobs.modis.html"><span>forma.hadoop.jobs.modis</span></a></h3><pre class="doc"></pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.hadoop.jobs.modis.html#var--main"><span>-main</span></a></li><li><a href="forma.hadoop.jobs.modis.html#var-modis-chunker"><span>modis-chunker</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.hadoop.jobs.neighbors.html"><span>forma.hadoop.jobs.neighbors</span></a></h3><pre class="doc"></pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.hadoop.jobs.neighbors.html#var-assign-vals"><span>assign-vals</span></a></li><li><a href="forma.hadoop.jobs.neighbors.html#var-create-window"><span>create-window</span></a></li><li><a href="forma.hadoop.jobs.neighbors.html#var-filtered-sample-query"><span>filtered-sample-query</span></a></li><li><a href="forma.hadoop.jobs.neighbors.html#var-global-coll-%3Ewindow-coll"><span>global-coll-&gt;window-coll</span></a></li><li><a href="forma.hadoop.jobs.neighbors.html#var-neighbor-src"><span>neighbor-src</span></a></li><li><a href="forma.hadoop.jobs.neighbors.html#var-neighbors"><span>neighbors</span></a></li><li><a href="forma.hadoop.jobs.neighbors.html#var-process-neighbors"><span>process-neighbors</span></a></li><li><a href="forma.hadoop.jobs.neighbors.html#var-sample-query"><span>sample-query</span></a></li><li><a href="forma.hadoop.jobs.neighbors.html#var-window-attribute-src"><span>window-attribute-src</span></a></li><li><a href="forma.hadoop.jobs.neighbors.html#var-window-map"><span>window-map</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.hadoop.jobs.preprocess.html"><span>forma.hadoop.jobs.preprocess</span></a></h3><pre class="doc"></pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.hadoop.jobs.preprocess.html#var-PreprocessAscii"><span>PreprocessAscii</span></a></li><li><a href="forma.hadoop.jobs.preprocess.html#var-PreprocessFire"><span>PreprocessFire</span></a></li><li><a href="forma.hadoop.jobs.preprocess.html#var-PreprocessRain"><span>PreprocessRain</span></a></li><li><a href="forma.hadoop.jobs.preprocess.html#var-PreprocessStatic"><span>PreprocessStatic</span></a></li><li><a href="forma.hadoop.jobs.preprocess.html#var-rain-chunker"><span>rain-chunker</span></a></li><li><a href="forma.hadoop.jobs.preprocess.html#var-static-chunker"><span>static-chunker</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.hadoop.jobs.scatter.html"><span>forma.hadoop.jobs.scatter</span></a></h3><pre class="doc">Namespace for arbitrary queries.
</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.hadoop.jobs.scatter.html#var-adjusted-precl-tap"><span>adjusted-precl-tap</span></a></li><li><a href="forma.hadoop.jobs.scatter.html#var-static-tap"><span>static-tap</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.hadoop.jobs.timeseries.html"><span>forma.hadoop.jobs.timeseries</span></a></h3><pre class="doc"></pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.hadoop.jobs.timeseries.html#var-DynamicTimeseries"><span>DynamicTimeseries</span></a></li><li><a href="forma.hadoop.jobs.timeseries.html#var-aggregate-fires"><span>aggregate-fires</span></a></li><li><a href="forma.hadoop.jobs.timeseries.html#var-create-fire-series"><span>create-fire-series</span></a></li><li><a href="forma.hadoop.jobs.timeseries.html#var-extract-tseries"><span>extract-tseries</span></a></li><li><a href="forma.hadoop.jobs.timeseries.html#var-fire-query"><span>fire-query</span></a></li><li><a href="forma.hadoop.jobs.timeseries.html#var-form-tseries"><span>form-tseries</span></a></li><li><a href="forma.hadoop.jobs.timeseries.html#var-merge-firevals"><span>merge-firevals</span></a></li><li><a href="forma.hadoop.jobs.timeseries.html#var-running-fire-sum"><span>running-fire-sum</span></a></li><li><a href="forma.hadoop.jobs.timeseries.html#var-timeseries"><span>timeseries</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.hadoop.pail.html"><span>forma.hadoop.pail</span></a></h3><pre class="doc"></pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.hadoop.pail.html#var-%3Fpail-"><span>?pail-</span></a></li><li><a href="forma.hadoop.pail.html#var-%3Fpail-*"><span>?pail-*</span></a></li><li><a href="forma.hadoop.pail.html#var-to-pail"><span>to-pail</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.hadoop.predicate.html"><span>forma.hadoop.predicate</span></a></h3><pre class="doc"></pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.hadoop.predicate.html#var-add-fields"><span>add-fields</span></a></li><li><a href="forma.hadoop.predicate.html#var-break"><span>break</span></a></li><li><a href="forma.hadoop.predicate.html#var-chunkify"><span>chunkify</span></a></li><li><a href="forma.hadoop.predicate.html#var-converter"><span>converter</span></a></li><li><a href="forma.hadoop.predicate.html#var-defpredsummer"><span>defpredsummer</span></a></li><li><a href="forma.hadoop.predicate.html#var-flatten-window"><span>flatten-window</span></a></li><li><a href="forma.hadoop.predicate.html#var-index"><span>index</span></a></li><li><a href="forma.hadoop.predicate.html#var-liberate"><span>liberate</span></a></li><li><a href="forma.hadoop.predicate.html#var-mangle"><span>mangle</span></a></li><li><a href="forma.hadoop.predicate.html#var-pixel-generator"><span>pixel-generator</span></a></li><li><a href="forma.hadoop.predicate.html#var-sparse-expansion"><span>sparse-expansion</span></a></li><li><a href="forma.hadoop.predicate.html#var-sparse-windower"><span>sparse-windower</span></a></li><li><a href="forma.hadoop.predicate.html#var-swap-syms"><span>swap-syms</span></a></li><li><a href="forma.hadoop.predicate.html#var-vals-%3Esparsevec"><span>vals-&gt;sparsevec</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.hoptree.html"><span>forma.hoptree</span></a></h3><pre class="doc"></pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.hoptree.html#var--%3EGlobalIndex"><span>-&gt;GlobalIndex</span></a></li><li><a href="forma.hoptree.html#var--%3EGlobalRowCol"><span>-&gt;GlobalRowCol</span></a></li><li><a href="forma.hoptree.html#var--%3ETileRowCol"><span>-&gt;TileRowCol</span></a></li><li><a href="forma.hoptree.html#var--%3EWindowIndex"><span>-&gt;WindowIndex</span></a></li><li><a href="forma.hoptree.html#var--%3EWindowRowCol"><span>-&gt;WindowRowCol</span></a></li><li><a href="forma.hoptree.html#var-global-dims"><span>global-dims</span></a></li><li><a href="forma.hoptree.html#var-in-window%3F"><span>in-window?</span></a></li><li><a href="forma.hoptree.html#var-map-%3EGlobalIndex"><span>map-&gt;GlobalIndex</span></a></li><li><a href="forma.hoptree.html#var-map-%3EGlobalRowCol"><span>map-&gt;GlobalRowCol</span></a></li><li><a href="forma.hoptree.html#var-map-%3ETileRowCol"><span>map-&gt;TileRowCol</span></a></li><li><a href="forma.hoptree.html#var-map-%3EWindowIndex"><span>map-&gt;WindowIndex</span></a></li><li><a href="forma.hoptree.html#var-map-%3EWindowRowCol"><span>map-&gt;WindowRowCol</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.matrix.utils.html"><span>forma.matrix.utils</span></a></h3><pre class="doc">A set of useful and general functions for matrix operations or
filters.</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.matrix.utils.html#var-above-x%3F"><span>above-x?</span></a></li><li><a href="forma.matrix.utils.html#var-coll-avg"><span>coll-avg</span></a></li><li><a href="forma.matrix.utils.html#var-column-matrix"><span>column-matrix</span></a></li><li><a href="forma.matrix.utils.html#var-idx-%3Erowcol"><span>idx-&gt;rowcol</span></a></li><li><a href="forma.matrix.utils.html#var-insert-at"><span>insert-at</span></a></li><li><a href="forma.matrix.utils.html#var-insert-into-val"><span>insert-into-val</span></a></li><li><a href="forma.matrix.utils.html#var-is-square%3F"><span>is-square?</span></a></li><li><a href="forma.matrix.utils.html#var-logical-replace"><span>logical-replace</span></a></li><li><a href="forma.matrix.utils.html#var-matrix-of"><span>matrix-of</span></a></li><li><a href="forma.matrix.utils.html#var-ones-column"><span>ones-column</span></a></li><li><a href="forma.matrix.utils.html#var-outer-product"><span>outer-product</span></a></li><li><a href="forma.matrix.utils.html#var-pred-replace"><span>pred-replace</span></a></li><li><a href="forma.matrix.utils.html#var-revolve"><span>revolve</span></a></li><li><a href="forma.matrix.utils.html#var-rowcol-%3Eidx"><span>rowcol-&gt;idx</span></a></li><li><a href="forma.matrix.utils.html#var-singular%3F"><span>singular?</span></a></li><li><a href="forma.matrix.utils.html#var-sparse-expander"><span>sparse-expander</span></a></li><li><a href="forma.matrix.utils.html#var-transpose"><span>transpose</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.matrix.walk.html"><span>forma.matrix.walk</span></a></h3><pre class="doc">Functions that move along a 2D array, collecting features of the
moving window.</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.matrix.walk.html#var-buffer-matrix"><span>buffer-matrix</span></a></li><li><a href="forma.matrix.walk.html#var-neighbor-scan"><span>neighbor-scan</span></a></li><li><a href="forma.matrix.walk.html#var-walk-matrix"><span>walk-matrix</span></a></li><li><a href="forma.matrix.walk.html#var-windowed-function"><span>windowed-function</span></a></li><li><a href="forma.matrix.walk.html#var-wipe-out"><span>wipe-out</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.ops.classify.html"><span>forma.ops.classify</span></a></h3><pre class="doc">Convenient wrapper functions for the classify.logistic namespace,
used mainly to compose cascalog queries.</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.ops.classify.html#var-beta-dict"><span>beta-dict</span></a></li><li><a href="forma.ops.classify.html#var-logistic-beta-wrap"><span>logistic-beta-wrap</span></a></li><li><a href="forma.ops.classify.html#var-logistic-prob-wrap"><span>logistic-prob-wrap</span></a></li><li><a href="forma.ops.classify.html#var-unpack-feature-vec"><span>unpack-feature-vec</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.playground.html"><span>forma.playground</span></a></h3><pre class="doc">This namespace is a playground for playing in the playground with play things.
It mostly includes handy Thrift objects and Thrift memory taps for playing with
at the REPL.</pre><div class="index"><p>Public variables and functions:</p><ul></ul></div></div><div class="namespace"><h3><a href="forma.postprocess.output.html"><span>forma.postprocess.output</span></a></h3><pre class="doc">Functions to smooth and clean FORMA probability series, and then a
few supporting functions to assess the accuracy of the estimates by
counting false negatives, true positives, etc.</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.postprocess.output.html#var-backward-looking-mavg"><span>backward-looking-mavg</span></a></li><li><a href="forma.postprocess.output.html#var-clean-probs"><span>clean-probs</span></a></li><li><a href="forma.postprocess.output.html#var-error-map"><span>error-map</span></a></li><li><a href="forma.postprocess.output.html#var-precision"><span>precision</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.reproject.html"><span>forma.reproject</span></a></h3><pre class="doc"></pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.reproject.html#var-bucket"><span>bucket</span></a></li><li><a href="forma.reproject.html#var-chunk-dims"><span>chunk-dims</span></a></li><li><a href="forma.reproject.html#var-constrain"><span>constrain</span></a></li><li><a href="forma.reproject.html#var-dataset-info"><span>dataset-info</span></a></li><li><a href="forma.reproject.html#var-dimensions-for-step"><span>dimensions-for-step</span></a></li><li><a href="forma.reproject.html#var-global-mags-%3Emodis"><span>global-mags-&gt;modis</span></a></li><li><a href="forma.reproject.html#var-global-mags-%3Esinu-xy"><span>global-mags-&gt;sinu-xy</span></a></li><li><a href="forma.reproject.html#var-hv-%3Etilestring"><span>hv-&gt;tilestring</span></a></li><li><a href="forma.reproject.html#var-latlon-%3Emodis"><span>latlon-&gt;modis</span></a></li><li><a href="forma.reproject.html#var-latlon-%3Erowcol"><span>latlon-&gt;rowcol</span></a></li><li><a href="forma.reproject.html#var-latlon-%3Esinu-xy"><span>latlon-&gt;sinu-xy</span></a></li><li><a href="forma.reproject.html#var-latlon-rad-%3Esinu-xy"><span>latlon-rad-&gt;sinu-xy</span></a></li><li><a href="forma.reproject.html#var-line-torus"><span>line-torus</span></a></li><li><a href="forma.reproject.html#var-modis-%3Eglobal-mags"><span>modis-&gt;global-mags</span></a></li><li><a href="forma.reproject.html#var-modis-%3Elatlon"><span>modis-&gt;latlon</span></a></li><li><a href="forma.reproject.html#var-modis-indexer"><span>modis-indexer</span></a></li><li><a href="forma.reproject.html#var-pixel-length"><span>pixel-length</span></a></li><li><a href="forma.reproject.html#var-rowcol-%3Elatlon"><span>rowcol-&gt;latlon</span></a></li><li><a href="forma.reproject.html#var-sinu-xy-%3Eglobal-mags"><span>sinu-xy-&gt;global-mags</span></a></li><li><a href="forma.reproject.html#var-sinu-xy-%3Elatlon"><span>sinu-xy-&gt;latlon</span></a></li><li><a href="forma.reproject.html#var-tile-position"><span>tile-position</span></a></li><li><a href="forma.reproject.html#var-tilestring-%3Ehv"><span>tilestring-&gt;hv</span></a></li><li><a href="forma.reproject.html#var-travel"><span>travel</span></a></li><li><a href="forma.reproject.html#var-valid-modis%3F"><span>valid-modis?</span></a></li><li><a href="forma.reproject.html#var-valid-rowcol%3F"><span>valid-rowcol?</span></a></li><li><a href="forma.reproject.html#var-valid-tiles"><span>valid-tiles</span></a></li><li><a href="forma.reproject.html#var-wgs84-indexer"><span>wgs84-indexer</span></a></li><li><a href="forma.reproject.html#var-wgs84-resolution"><span>wgs84-resolution</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.schema.html"><span>forma.schema</span></a></h3><pre class="doc">A set of functions to structure other queries.
</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.schema.html#var-add-fires"><span>add-fires</span></a></li><li><a href="forma.schema.html#var-adjust"><span>adjust</span></a></li><li><a href="forma.schema.html#var-adjust-fires"><span>adjust-fires</span></a></li><li><a href="forma.schema.html#var-boundaries"><span>boundaries</span></a></li><li><a href="forma.schema.html#var-combine-neighbors"><span>combine-neighbors</span></a></li><li><a href="forma.schema.html#var-create-timeseries"><span>create-timeseries</span></a></li><li><a href="forma.schema.html#var-empty-neighbor-val"><span>empty-neighbor-val</span></a></li><li><a href="forma.schema.html#var-fires-cleanup"><span>fires-cleanup</span></a></li><li><a href="forma.schema.html#var-forma-seq"><span>forma-seq</span></a></li><li><a href="forma.schema.html#var-forma-value"><span>forma-value</span></a></li><li><a href="forma.schema.html#var-merge-neighbors"><span>merge-neighbors</span></a></li><li><a href="forma.schema.html#var-neighbor-value"><span>neighbor-value</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.source.fire.html"><span>forma.source.fire</span></a></h3><pre class="doc">This namespace has functions and Cascalog queries for processing fire data.

Fires are recorded daily by the Fire Information For Resource Management
System (http://maps.geog.umd.edu) using the NASA Terra and Aqua satellites.
They are described using the following attributes which are stored in a CSV
file:

  http://firefly.geog.umd.edu/firms/faq.htm#attributes

Here's an example CSV file:

   latitude,longitude,brightness,scan,track,acq_date,acq_time,satellite,confidence,version,bright_t31,frp
  -21.774,-48.371,328.8,2.6,1.6,05/11/2012,0125,T,100,5.0,280.7,164.3
  -21.770,-48.378,327.4,2.6,1.6,05/11/2012,0125,T,100,5.0,280.3,157.4
  -16.615,-43.483,307.5,1.1,1.0,05/11/2012,0125,T,55,5.0,285.7,15.8

The FORMA algorithm depends on latitude, longitude, brightness, confidence
and acq_date. Before these fires can be used, they have to fist get converted
from latitude and longitude into MODIS pixel coordinates at 500 meter resolution.

Once converted, we store each fire in a DataChunk Thrift object and store it
into a Pail. Pails are cool because you can append to them. This allows us to
incrementally process fire data. To see the Thrift object definitions, check
out the dev/forma.thirft IDL.

After getting converted, here's what a fire DataChunk looks like for a
single fire.

  DataChunk
    dataset - The name of the dataset which is just 'fire'
    locationProperty - The ModisPixelLocation Thrift object.
    chunkValue - The FireTuple Thrift object.
    temporalRes - The temporal resolution of fires which is one day.
    date - The acq_date field for the fire.

The FireTuple Thrift object defines properties of a single fire or multiple
fires. In this step, it represents a single fire. The 'temp330' is set to 1
if the fire is greater than 330 degrees Kelvin. The 'conf50' is set to 1 if
the fire confidence is greater than 50. If 'temp330' and 'conf50' are both 1,
the 'bothPreds' is set to 1. For a single fire, the 'count' is set to 1. 

At the end of this step, we have a single Pail full of DataChunk objects, one
per fire, each which represents the fire in MODIS pixel coordinates.

Note: We received fire data organized into files by month through February
2010 from the University of Maryland. These are stored on S3 in the
s3://modisfiles/MonthlyFires directory. More recent fire data are organized
into daily files. The difference between them is the date formatting and
we have functions here to convert between them.

  Daily:  MM/DD/YYYY
  Monthly: YYYYMMDD</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.source.fire.html#var-daily-datestring"><span>daily-datestring</span></a></li><li><a href="forma.source.fire.html#var-fire-characteristics"><span>fire-characteristics</span></a></li><li><a href="forma.source.fire.html#var-fire-pred"><span>fire-pred</span></a></li><li><a href="forma.source.fire.html#var-fire-source-daily"><span>fire-source-daily</span></a></li><li><a href="forma.source.fire.html#var-fire-source-monthly"><span>fire-source-monthly</span></a></li><li><a href="forma.source.fire.html#var-monthly-datestring"><span>monthly-datestring</span></a></li><li><a href="forma.source.fire.html#var-reproject-fires"><span>reproject-fires</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.source.gadmiso.html"><span>forma.source.gadmiso</span></a></h3><pre class="doc"></pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.source.gadmiso.html#var-gadm-%3Eiso"><span>gadm-&gt;iso</span></a></li><li><a href="forma.source.gadmiso.html#var-gadm-iso"><span>gadm-iso</span></a></li><li><a href="forma.source.gadmiso.html#var-parse-line"><span>parse-line</span></a></li><li><a href="forma.source.gadmiso.html#var-text-map"><span>text-map</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.source.hdf.html"><span>forma.source.hdf</span></a></h3><pre class="doc"></pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.source.hdf.html#var-dataset-filter"><span>dataset-filter</span></a></li><li><a href="forma.source.hdf.html#var-make-subdataset"><span>make-subdataset</span></a></li><li><a href="forma.source.hdf.html#var-meta-values"><span>meta-values</span></a></li><li><a href="forma.source.hdf.html#var-metadata"><span>metadata</span></a></li><li><a href="forma.source.hdf.html#var-modis-chunks"><span>modis-chunks</span></a></li><li><a href="forma.source.hdf.html#var-modis-subsets"><span>modis-subsets</span></a></li><li><a href="forma.source.hdf.html#var-raster-chunks"><span>raster-chunks</span></a></li><li><a href="forma.source.hdf.html#var-split-id"><span>split-id</span></a></li><li><a href="forma.source.hdf.html#var-subdataset-key"><span>subdataset-key</span></a></li><li><a href="forma.source.hdf.html#var-subdataset-names"><span>subdataset-names</span></a></li><li><a href="forma.source.hdf.html#var-tileid-%3Eres"><span>tileid-&gt;res</span></a></li><li><a href="forma.source.hdf.html#var-unpack-modis"><span>unpack-modis</span></a></li><li><a href="forma.source.hdf.html#var-with-gdal-open"><span>with-gdal-open</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.source.rain.html"><span>forma.source.rain</span></a></h3><pre class="doc"></pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.source.rain.html#var-floats-for-step"><span>floats-for-step</span></a></li><li><a href="forma.source.rain.html#var-rain-chunks"><span>rain-chunks</span></a></li><li><a href="forma.source.rain.html#var-rain-months"><span>rain-months</span></a></li><li><a href="forma.source.rain.html#var-rain-tuples"><span>rain-tuples</span></a></li><li><a href="forma.source.rain.html#var-rain-values"><span>rain-values</span></a></li><li><a href="forma.source.rain.html#var-resample-rain"><span>resample-rain</span></a></li><li><a href="forma.source.rain.html#var-to-datestring"><span>to-datestring</span></a></li><li><a href="forma.source.rain.html#var-to-rows"><span>to-rows</span></a></li><li><a href="forma.source.rain.html#var-unpack-rain"><span>unpack-rain</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.source.static.html"><span>forma.source.static</span></a></h3><pre class="doc"></pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.source.static.html#var-agg-chunks"><span>agg-chunks</span></a></li><li><a href="forma.source.static.html#var-downsample-modis"><span>downsample-modis</span></a></li><li><a href="forma.source.static.html#var-index-textfile"><span>index-textfile</span></a></li><li><a href="forma.source.static.html#var-static-chunks"><span>static-chunks</span></a></li><li><a href="forma.source.static.html#var-static-modis-chunks"><span>static-modis-chunks</span></a></li><li><a href="forma.source.static.html#var-upsample-modis"><span>upsample-modis</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.source.tilesets.html"><span>forma.source.tilesets</span></a></h3><pre class="doc"></pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.source.tilesets.html#var-country-tiles"><span>country-tiles</span></a></li><li><a href="forma.source.tilesets.html#var-tile-set"><span>tile-set</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.static.html"><span>forma.static</span></a></h3><pre class="doc"></pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.static.html#var-static-datasets"><span>static-datasets</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.testing.html"><span>forma.testing</span></a></h3><pre class="doc">These functions provide assistance for directory
navigation for testing. One compromise we make here is the binding
of `dev-resources-subdir`; This is defined as `:dev-resources-path`
in `project.clj`, but reading either of these would force a
dependency on pallet or cake. We've included a test to make sure
that `dev` exists on any deployment of the given project; a failing
test means that this directory should be created.</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.testing.html#var-dev-path"><span>dev-path</span></a></li><li><a href="forma.testing.html#var-get-current-directory"><span>get-current-directory</span></a></li><li><a href="forma.testing.html#var-project-path"><span>project-path</span></a></li><li><a href="forma.testing.html#var-resources-path"><span>resources-path</span></a></li><li><a href="forma.testing.html#var-test-path"><span>test-path</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.thrift.html"><span>forma.thrift</span></a></h3><pre class="doc">This namespace provides an API for creating, accessing fields of, and
 unpacking Thrift objects defined in the dev/forma.thrift IDL. 

The following functions are available for creating Thrift objects:

  NeighborValue*
  FireValue*
  ModisChunkLocation*
  ModisPixelLocation*
  TimeSeries*
  FormaValue*
  DataChunk*

Example usage for creating a TimeSeries:

  &gt; (TimeSeries* 0 1 [1.0 2.0 3.0])
  #&lt;TimeSeries TimeSeries(
      startIdx:0,
      endIdx:1,
      series:&lt;ArrayValue doubles:DoubleArray(doubles:[1.0, 2.0, 3.0])&gt;)&gt;

To unpack Thrift objects, use the unpack function which returns a vector of
Thrift object field values in the order defined in the IDL.

Example usage for unpacking a TimeSeries:

  &gt; (def ts (TimeSeries* 0 1 [1.0 2.0 3.0]))
  &gt; (unpack ts)
  [0 1 #&lt;ArrayValue &lt;ArrayValue doubles:DoubleArray(doubles:[1.0, 2.0, 3.0])&gt;&gt;]

Example usage for unpacking the TimeSeries series field:

  &gt; (unpack (get-series ts)
  [1.0 2.0 3.0]</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.thrift.html#var-DataChunk*"><span>DataChunk*</span></a></li><li><a href="forma.thrift.html#var-DataValue%3F"><span>DataValue?</span></a></li><li><a href="forma.thrift.html#var-FireValue*"><span>FireValue*</span></a></li><li><a href="forma.thrift.html#var-FormaValue*"><span>FormaValue*</span></a></li><li><a href="forma.thrift.html#var-LocationPropertyValue%3F"><span>LocationPropertyValue?</span></a></li><li><a href="forma.thrift.html#var-ModisChunkLocation*"><span>ModisChunkLocation*</span></a></li><li><a href="forma.thrift.html#var-ModisPixelLocation*"><span>ModisPixelLocation*</span></a></li><li><a href="forma.thrift.html#var-NeighborValue*"><span>NeighborValue*</span></a></li><li><a href="forma.thrift.html#var-TimeSeries*"><span>TimeSeries*</span></a></li><li><a href="forma.thrift.html#var-TimeSeries%3F"><span>TimeSeries?</span></a></li><li><a href="forma.thrift.html#var-count-vals"><span>count-vals</span></a></li><li><a href="forma.thrift.html#var-double-struct"><span>double-struct</span></a></li><li><a href="forma.thrift.html#var-fire-array"><span>fire-array</span></a></li><li><a href="forma.thrift.html#var-forma-array"><span>forma-array</span></a></li><li><a href="forma.thrift.html#var-int-struct"><span>int-struct</span></a></li><li><a href="forma.thrift.html#var-list-of"><span>list-of</span></a></li><li><a href="forma.thrift.html#var-unpack*"><span>unpack*</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.trends.analysis.html"><span>forma.trends.analysis</span></a></h3><pre class="doc"></pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.trends.analysis.html#var-first-order-conditions"><span>first-order-conditions</span></a></li><li><a href="forma.trends.analysis.html#var-grab-trend"><span>grab-trend</span></a></li><li><a href="forma.trends.analysis.html#var-hansen-stat"><span>hansen-stat</span></a></li><li><a href="forma.trends.analysis.html#var-linear-residuals"><span>linear-residuals</span></a></li><li><a href="forma.trends.analysis.html#var-long-stats"><span>long-stats</span></a></li><li><a href="forma.trends.analysis.html#var-pseudoinverse"><span>pseudoinverse</span></a></li><li><a href="forma.trends.analysis.html#var-short-stat"><span>short-stat</span></a></li><li><a href="forma.trends.analysis.html#var-trend-characteristics"><span>trend-characteristics</span></a></li><li><a href="forma.trends.analysis.html#var-trend-mat"><span>trend-mat</span></a></li><li><a href="forma.trends.analysis.html#var-windowed-trend"><span>windowed-trend</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.trends.filter.html"><span>forma.trends.filter</span></a></h3><pre class="doc"></pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.trends.filter.html#var-apply-to-valid"><span>apply-to-valid</span></a></li><li><a href="forma.trends.filter.html#var-bad-ends"><span>bad-ends</span></a></li><li><a href="forma.trends.filter.html#var-deseasonalize"><span>deseasonalize</span></a></li><li><a href="forma.trends.filter.html#var-dummy-mat"><span>dummy-mat</span></a></li><li><a href="forma.trends.filter.html#var-harmonic-seasonal-decomposition"><span>harmonic-seasonal-decomposition</span></a></li><li><a href="forma.trends.filter.html#var-harmonic-series"><span>harmonic-series</span></a></li><li><a href="forma.trends.filter.html#var-hp-filter"><span>hp-filter</span></a></li><li><a href="forma.trends.filter.html#var-hp-mat"><span>hp-mat</span></a></li><li><a href="forma.trends.filter.html#var-interpolate"><span>interpolate</span></a></li><li><a href="forma.trends.filter.html#var-k-harmonic-matrix"><span>k-harmonic-matrix</span></a></li><li><a href="forma.trends.filter.html#var-make-clean"><span>make-clean</span></a></li><li><a href="forma.trends.filter.html#var-make-reliable"><span>make-reliable</span></a></li><li><a href="forma.trends.filter.html#var-mask"><span>mask</span></a></li><li><a href="forma.trends.filter.html#var-neutralize-ends"><span>neutralize-ends</span></a></li><li><a href="forma.trends.filter.html#var-reliable%3F"><span>reliable?</span></a></li><li><a href="forma.trends.filter.html#var-replace-index-set"><span>replace-index-set</span></a></li><li><a href="forma.trends.filter.html#var-shorten-ts"><span>shorten-ts</span></a></li><li><a href="forma.trends.filter.html#var-stretch-ts"><span>stretch-ts</span></a></li><li><a href="forma.trends.filter.html#var-tele-ts"><span>tele-ts</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.trends.stretch.html"><span>forma.trends.stretch</span></a></h3><pre class="doc"></pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.trends.stretch.html#var-expand-to-days"><span>expand-to-days</span></a></li><li><a href="forma.trends.stretch.html#var-shift-periods-target-res"><span>shift-periods-target-res</span></a></li><li><a href="forma.trends.stretch.html#var-ts-expander"><span>ts-expander</span></a></li></ul></div></div><div class="namespace"><h3><a href="forma.utils.html"><span>forma.utils</span></a></h3><pre class="doc"></pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="forma.utils.html#var-between%3F"><span>between?</span></a></li><li><a href="forma.utils.html#var-find-first"><span>find-first</span></a></li><li><a href="forma.utils.html#var-force-fill%21"><span>force-fill!</span></a></li><li><a href="forma.utils.html#var-idx"><span>idx</span></a></li><li><a href="forma.utils.html#var-input-stream"><span>input-stream</span></a></li><li><a href="forma.utils.html#var-moving-average"><span>moving-average</span></a></li><li><a href="forma.utils.html#var-multiply-rows"><span>multiply-rows</span></a></li><li><a href="forma.utils.html#var-nth-in"><span>nth-in</span></a></li><li><a href="forma.utils.html#var-partition-stream"><span>partition-stream</span></a></li><li><a href="forma.utils.html#var-positions"><span>positions</span></a></li><li><a href="forma.utils.html#var-scale"><span>scale</span></a></li><li><a href="forma.utils.html#var-strings-%3Efloats"><span>strings-&gt;floats</span></a></li><li><a href="forma.utils.html#var-trim-seq"><span>trim-seq</span></a></li><li><a href="forma.utils.html#var-unweave"><span>unweave</span></a></li><li><a href="forma.utils.html#var-weighted-mean"><span>weighted-mean</span></a></li><li><a href="forma.utils.html#var-windowed-map"><span>windowed-map</span></a></li></ul></div></div></div></body></html>